<link rel="import" href="../../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../../bower_components/paper-input/paper-input.html" />
<link rel="import" href="../../../bower_components/iron-form/iron-form.html" />
<link rel="import" href="../../../bower_components/vaadin-combo-box/vaadin-combo-box.html" />
<link rel="import" href="../../../bower_components/paper-button/paper-button.html" />

<dom-module id="test-test">
  <template>

    <style include="common-styles">
      .main{
        margin: 50px 10% 50px 10%;
        width:80%;
        min-height:700px;
      }

    </style>

    <paper-card class="main">

      <form is="iron-form" id="mainForm">
        <paper-input
          label="name"
          value="{{testData.name}}"
          required
          error-message="pick a name dumbass..."></paper-input>
        <vaadin-combo-box
          allow-custom-value
          label="age"
          items="[[ages]]"
          value="{{testData.age}}"
          required
          auto-validate
          error-message="Please enter a number">
        </vaadin-combo-box>
        <paper-button on-tap="validate">validate</paper-button>
      </form>

    </paper-card>

  </template>

  <script>

      Polymer({
        is: 'test-test',

        ready:function(){
          this.fire("pageLoaded",{page: this.page});
        },

        attributeChanged: function(name, type) {
          console.log(this.localName + '#' + this.id + ' attribute ' + name +
            ' was changed to ' + this.getAttribute(name));
        },
        
        properties:{
          testData: {
            type: Object,
            value: {}
          },
          ages: {
            type: Array,
            value: [
              '1',
              '2',
              '3',
              '4',
              '5',
              '6',
              '7',
              '8',
              '9'
            ]
          }
        },

        observers: [
          '_testDataChanged(testData.*)'
        ],

        _testDataChanged: function(dataDeep) {
          var data = dataDeep.base;
          console.log(data);
        },

        validate: function() {
          var valid = this.$.mainForm.validate();
          console.log(valid);
        }

      });

  </script>

</dom-module>
