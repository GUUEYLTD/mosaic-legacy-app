<link rel="import" href="../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../bower_components/iron-scroll-target-behavior/iron-scroll-target-behavior.html" />

<script>

  (function(){
    "use-strict";
    /*
    @polymerBehavior Polymer.guueyDialogResizeBehavior
    */
    Polymer.guueyDialogResizeBehaviorImp = {
      
      is:"guuey-dialog-resize-behavior",

      properties: {
        xScrollTop: {
          type: Number,
          readOnly: true,
          value: 0,
        }
      },


      attached: function() {
        this._fitDialogs();
        this._scrollHandler();
      },

      _scrollHandler: function() {
        this._setXScrollTop(this._scrollTop);
      },

      observers: [
        '_fitDialogs(xScrollTop)'
      ],

      _fitDialogs: function(xScroll) {
          if(xScroll < 64 || xScroll === undefined) {
            var that = this;

            var dialogs = Polymer.dom(this.root).querySelectorAll('paper-dialog');
            dialogs.forEach(function(dialog) {
              dialog.fitInto = that;
            });

            var others = Polymer.dom(this.root).querySelectorAll('guuey-new-goal-modal');
            others.forEach(function(dialog) {
              dialog.fitInto = that;
            });

          } else {
            var that = this;

            var dialogs = Polymer.dom(this.root).querySelectorAll('paper-dialog');
            dialogs.forEach(function(dialog) {
              dialog.fitInto = window;
            });

            var others = Polymer.dom(this.root).querySelectorAll('guuey-new-goal-modal');
            others.forEach(function(dialog) {
              dialog.fitInto = window;
            });

          };
      }

    };
    /*
    @polymerBehavior Polymer.guueyDialogResizeBehavior
    */
    Polymer.guueyDialogResizeBehavior = [Polymer.IronScrollTargetBehavior, Polymer.guueyDialogResizeBehaviorImp];

  })();

</script>
