<link rel="import" href="../../bower_components/polymer/polymer.html">

<script>

  (function(){
    'use-strict';
    Polymer.suPrintBehaviorImp={

      is:"su-print-behavior",
      ready:function(){
        this.addEventListener("print",this.print);
      },
      print:function(){
        //perform print functions based on page var
        //su-care case
        if(this.page==="su-care"){
          //why the fuck isnt date dynamic???
          var date="Thu Jul 14 2016 00:00:00 GMT+0200 (CEST)";
          var printable=window.open("","printable", "height:=400, width=600");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          var printData=this.$.printDB.data;
          for(x in printData){
            switch(x) {
              case "careAndSuppProp":
                var proposal=printData[x];
                printable.document.write("<p style='font-weight:bold'>Proposals:</p>");
                printable.document.write("<ol>");
                for(y in proposal){
                  printable.document.write("<li>"+proposal[y].proposal+"</li>");
                };
                printable.document.write("</ol>");
                break;
              case "interventionByStaff":
                var proposal=printData[x];
                printable.document.write("<p style='font-weight:bold'>Intervention By Staff Proposals:</p>");
                printable.document.write("<ol>");
                for(y in proposal){
                  printable.document.write("<li>"+proposal[y].proposal+"</li>");
                };
                printable.document.write("</ol>");
                break;
              case "myHealthQuestionnaire":
                var healthData=printData[x];
                for(y in healthData){
                  var healthSub=healthData[y];
                  for(z in healthSub){
                    if(z!="comment"){
                      printable.document.write("<p>"+y+": "+z+"</p>");
                    };
                    if(z==="comment"){
                      printable.document.write("<p>Comment: "+healthSub[z]+"</p>");
                    };
                  };
                };
                break;
              case "myRoomQuestionnaire":
                var roomData=printData[x];
                for(y in roomData){
                  var roomSub=roomData[y];
                  for(z in roomSub){
                    if(z!="comment"){
                      printable.document.write("<p>"+y+": "+z+"</p>");
                    };
                    if(z==="comment"){
                      printable.document.write("<p>Comment: "+roomSub[z]+"</p>");
                    };
                  };
                };
                break;
              case "wellBeingQuestionnaire":
                var wellData=printData[x];
                for(y in wellData){
                  var wellSub=wellData[y];
                  for(z in wellSub){
                    if(z!="comment"){
                      printable.document.write("<p>"+y+": "+z+"</p>");
                    };
                    if(z==="comment"){
                      printable.document.write("<p>Comment: "+wellSub[z]+"</p>");
                    };
                  };
                };
                break;
              case "whatWillTheServiceUserDo":
                var proposal=printData[x];
                printable.document.write("<p style='font-weight:bold'>Service User Proposals:</p>");
                printable.document.write("<ol>");
                for(y in proposal){
                  printable.document.write("<li>"+proposal[y].proposal+"</li>");
                };
                printable.document.write("</ol>");
                break;
              case "statementOfServiceUser":
                if(printData[x].suAgree && printData[x].swAgree){
                  printable.document.write("<p>Service User Agreed on :"+printData[x].suDate.slice(0,15)+"</p>");
                  printable.document.write("<p>Service Worker Agreed on :"+printData[x].swDate.slice(0,15)+"</p>");
                } else if(printData[x].suAgree){
                  printable.document.write("<p>Service User Agreed on :"+printData[x].suDate.slice(0,15)+"</p>");
                  printable.document.write("<p>Service Worker has not Agreed</p>");
                } else if(printData[x].swAgree){
                  printable.document.write("<p>Service User has not Agreed</p>");
                  printable.document.write("<p>Service Worker Agreed on :"+printData[x].swDate.slice(0,15)+"</p>");
                } else {
                  printable.document.write("<p>Service User and Service Worker have not Agreed</p>");
                };
                break;
              case "custom":
                var custom=printData[x];
                for(y in custom){
                  printable.document.write("<p>"+custom[y].label+"/"+custom[y].label2+" :"+custom[y].info+"</p>")
                };
                break;
              default:
                printable.document.write("<p>"+this.convertToPrintText(x)+": "+printData[x].info+"<br /></p>");
                break;
              };
          };
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };

        //su-care-review case
        if(this.page==="su-care-review"){

        };

        //su-goals case
        if(this.page==="su-goals"){
          var printData=this.$.printDB.data;
          var printable=window.open("","printable");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          for(x in printData){
            var goal=printData[x];
            printable.document.write("<p style='font-weight:bold;'>Goal</p>");
            for(y in goal){
              var goalProp=goal[y];
              if(y!="steps"){
                printable.document.write("<p>"+y+": "+goalProp+"</p>");
              };
              if(y==="steps"){
                for(z in goalProp){
                  var steps=goalProp[z];
                  printable.document.write("<p style='font-weight:bold;'>Goal Step</p>");
                  for(xx in steps){
                    var stepProp=steps[xx];
                    printable.document.write("<p>"+this.convertToPrintText(xx)+": "+stepProp+"</p>");
                  };
                };
              };
            };
          };
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };

        //su-medical case
        if(this.page==="su-medical"){
          var printable=window.open("","printable", "height:=400, width=600");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          printable.document.write("<p>Build Print pages later.</p></br>")
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };

        //su-medication case
        if(this.page==="su-medication"){
          var printData=this.$.medsDB.data;
          var printable=window.open("","printable");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          printable.document.write("<p style='font-weight:bold;'>Medication List and History</p>");
          for(x in printData){
            var med=printData[x];
            for(y in med){
              var medHistory=med[y];
              var date=medHistory.log.time;
              var formattedDate=new Date(date);yy
              var printDate=formattedDate.getDay()+"."+formattedDate.getMonth()+"."+formattedDate.getFullYear();
              printable.document.write("<p style='font-weight:bold;'>"+formattedDate+"</p>");
              printable.document.write("<ul>");
              for(z in medHistory.med){
                printable.document.write("<li>"+this.convertToPrintText(z)+": "+medHistory.med[z]+"</li>");
              };
              printable.document.write("</ul>");
            };
          };
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };

        //su-pre admissin assessment
        if(this.page==="su--pre"){
          var printable=window.open("","printable");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          var assmt=this.assmtData;
          for(x in assmt){
            if(x !="custom"){
              printable.document.write("<p>"+this.convertToPrintText(x)+": "+assmt[x].info+"<br /></p>");
            }
            if(x ==="custom"){
              var custom=assmt[x];
              for(y in custom){
                printable.document.write("<p>"+custom[y].label+"/"+custom[y].label2+": "+custom[y].info+"</br></p>");
              }
            }
          };
          printable.document.write();
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };

        //su-profile case
        if(this.page==="su-profile"){
          var printable=window.open("","printable");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          var patient = this.profileData;
          var contacts = this.$.contactsQuery.data;
          for(x in patient){
            if(x !="image"){
              printable.document.write("<p>"+this.convertToPrintText(x)+": "+patient[x]+"<br /></p>");
            }
          };
          for(x in contacts){
            printable.document.write("<p>"+this.convertToPrintText(x)+": "+contacts[x].name+"<br /></p>");
            printable.document.write("<p>"+this.convertToPrintText(x)+": "+contacts[x].address+"<br /></p>");
            printable.document.write("<p>"+this.convertToPrintText(x)+": "+contacts[x].phone+"<br /></p>");
          };
          printable.document.write();
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };

        //su-risk case
        if(this.page==="su-risk"){
          var printable=window.open("","printable");
          printable.document.write("<html><head>");
          printable.document.write("</head><body>");
          printable.document.write("<div style='width:100% padding:5%;'>");
          var printData=this.$.printDB.data;
          for(x in printData){
            var assmt=printData[x];
            printable.document.write("<p style='font-weight:bold;'>"+assmt.date.slice(0,15)+"</p>");
            for(y in assmt){
              var subAssmt=assmt[y];
              if(y!="date"){
                printable.document.write("<p>"+this.convertToPrintText(y)+": "+subAssmt.info+"</p>");
              };
            };
          };
          printable.document.write("</body></html>");
          printable.document.write("</div>");
          printable.print();
          printable.close();
        };
      },
      convertToPrintText:function(camelCase){
        if (camelCase == null || camelCase == "") {
          return camelCase;
        }

        camelCase = camelCase.trim();
        var newText = "";
        for (var i = 0; i < camelCase.length; i++) {
          if (/[A-Z]/.test(camelCase[i])
              && i != 0
              && /[a-z]/.test(camelCase[i-1])) {
            newText += " ";
          }
          if (i == 0 && /[a-z]/.test(camelCase[i]))
          {
            newText += camelCase[i].toUpperCase();
          } else {
            newText += camelCase[i];
          }
        }
        return newText;
      },

    };
    Polymer.suPrintBehavior={
      Polymer.suPrintBehaviorImp
    };
  })();

</script>
