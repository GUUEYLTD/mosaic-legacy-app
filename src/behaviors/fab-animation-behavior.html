<link rel="import" href="../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../bower_components/neon-animation/neon-animatable-behavior.html" />
<link rel="import" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html" />
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-left-animation.html" />
<link rel="import" href="../../bower_components/neon-animation/animations/fade-out-animation.html" />
<link rel="import" href="../../bower_components/neon-animation/animations/fade-in-animation.html" />
<link rel="import" href="./animations/fab-down-animation.html" />
<link rel="import" href="./animations/fab-up-animation.html" />


  <script>
  (function(){
    "use-strict";
    Polymer.fabAnimationBehaviorImpl={
      is: 'fab-animation-behavior',
      attached:function(){
        this.addEventListener("neon-animation-finish", this._neonAnimationFinish);
      },
      attributeChanged:function(){
        this.$.editFab.style.left=this.$.mainCard.offsetLeft + this.$.mainCard.offsetWidth - this.$.editFab.offsetWidth/2 + "px";
        this.$.editFab.disabled=true;

        this.animationConfig={
          "editState":[
            {
              name:"fade-out-animation",
              node:this.$.regFab,
              timing:{delay:400, duration:500}
            },
            {
              name:"fade-in-animation",
              node:this.$.editFab,
              timing:{delay:100, duration:500}
            }
          ],
          "regState":[
            {
              name:"fade-out-animation",
              node:this.$.editFab,
              timing:{delay:400, duration:500}
            },
            {
              name:"fade-in-animation",
              node:this.$.regFab,
              timing:{delay:400, duration:500}
            }
          ]
        }
      },
      properties:{
        animationConfig:{

        }
      },
      animateEditState:function(){
        this.$.editFab.style.left=this.$.mainCard.offsetLeft + this.$.mainCard.offsetWidth - this.$.editFab.offsetWidth/2 + "px";
        this.playAnimation("editState", "edit");
      },
      animateRegState:function(){
        this.playAnimation("regState", "reg");
      },
      _neonAnimationFinish:function(e){

        if(e.detail==="edit"){
          this.$.editFab.style.left=this.$.mainCard.offsetLeft + this.$.mainCard.offsetWidth - this.$.editFab.offsetWidth/2 + "px";
          this.$.regFab.style.opacity=0;
          this.$.regFab.disabled=true;
          this.$.editFab.style.opacity=1;
          this.$.editFab.disabled=false;
        } else if(e.detail==="reg"){
          this.$.editFab.style.opacity=0;
          this.$.editFab.disabled=true;
          this.$.regFab.style.opacity=1;
          this.$.regFab.disabled=false;
        }
      },

      behaviors:[
        Polymer.NeonAnimationRunnerBehavior
      ]
    }
    Polymer.fabAnimationBehavior=[
      Polymer.fabAnimationBehaviorImpl,
      Polymer.NeonAnimationRunnerBehavior
    ]
  })();

  </script>
