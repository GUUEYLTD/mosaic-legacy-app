<link rel="import" href="../../bower_components/polymer/polymer.html" />

<script>

  (function(){
    "use-strict";
    /*
    @polymerBehavior Polymer.multiViewGridBehavior
    */
    Polymer.multiViewGridBehavior={
      is:"multi-view-grid-behavior",
      ready:function(){
        this.async(function(){
          this._observer = Polymer.dom(this.$$(".multiViewCard")).observeNodes(function(info){
            this.addedNodes = info.addedNodes;
            this.removedNodes = info.removedNodes;
          }.bind(this));
        });
      },
      observers:[
        "_checkMultiItemCount(appGridColumns, addedNodes, removedNodes)"
      ],
      _checkMultiItemCount:function(columns, added, removed){
        console.log(columns, added, removed);
        var items=0;
        added.forEach(function(el){
          if(el.classList){
            if(el.classList.contains("multiItem")){
              items++;
            }
          };
        });
        var remainders = items <= columns ? columns - items : columns - (items % columns);
        if(items > 1 && remainders != 0){
          this._fillInColumns(remainders);
        };
      },
      _fillInColumns:function(fillerCount){
        for(i=0; i<fillerCount; i++){
          var filler = document.createElement("div");
          filler.className = "fillerItem";
          Polymer.dom(this.$$(".multiViewCard")).appendChild(filler);
          Polymer.dom.flush();
        };
      },
    };

  })();

</script>
